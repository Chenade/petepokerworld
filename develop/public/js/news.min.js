$(document).ready(function () {

    $.ajax({
        url: '/api/ease/news/100',
        method: 'GET',
        dataType: 'json',

        success: function (res) {
            var list = res.data, wow = 100;
            for (var i in list) {
                var news = list[i];
                if(news['active'] == 1){
                    var duration = (news['duration']) ? '&emsp;(' + news['duration'] + ')' : '';
                    var div = ' ' +
                        '<div class="single-news-area col-12 col-sm-6 d-flex flex-wrap wow fadeInUp" data-wow-delay="'+wow+'ms" data-id="' + news['id'] + '">\n' +
                        '   <div class="news-thumbnail col-12 col-sm-4"><img src="img/news1.jpg"></div>\n' +
                        '      <div class="news-content col-12 col-sm-8 d-flex flex-column justify-content-between">\n' +
                        '         <div class="news-meta">\n' +
                        '            <a href="#" class="news-duration tag" data-id="' + news['id'] + '">' + news['start'] + ' ~ ' + news['end'] + duration +'</a>\n' +
                        '         </div>\n' +
                        '         <div><p class="news-title nopadding" data-id="' + news['id'] + '">' + news['title'] + '</p></div>\n' +
                        '         <div>\n' +
                        '            <p>' + news['caption'] + '</p>\n' +
                        '            </div>\n' +
                        '         <div class="news-detail" style="display: none" data-id="' + news['id'] + '">' + news['detail'] + '</div>' +
                        '         <button class="btn news-detail-btn" data-id="' + news['id'] + '">View Details <i class="fas fa-long-arrow-alt-right"></i></button>' +
                        '      </div>\n' +
                        '</div>';

                    $('#newsList').append(div);
                    wow += 200;
                }
            }
        },
        error: function (err) {
            console.log(err)
        },
    });

    $(document).on('click', '.news-detail-btn', function () {
        var btn = $(this), bid = btn.data('id');

        $('#news_title').text($('.news-title[data-id='+bid+']').text());
        $('#news_duration').val($('.news-duration[data-id='+bid+']').text());
        $('#news_detail').text($('.news-detail[data-id='+bid+']').text());

        $('#news_modal').modal({
            backdrop: 'static',
            keyboard: true,
            show: true
        });

    });

});
