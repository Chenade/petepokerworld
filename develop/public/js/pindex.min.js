var trans_media = function(tmp){
    switch (tmp)
    {
        case(1):
            return ("Facebook") ;
        case (2):
            return ("Instagram") ;
        case (3):
            return ("Line@") ;
        case (4):
            return ("Discord") ;
        case (5):
            return ("Line教學群") ;
        case (6):
            return ("Line Open chat") ;
        case (7):
                return ("Youtube") ;
        case (8):
            return ("Twitch") ;
        default:
            return ("Undefined") ;
    }
};

$(document).ready(function() {

    $('#breadcrumb').hide();

    ajax('GET', '/api/banner/list', {}, function (a) {
        let response = '';
        for (let i = 0; i < a.data.length; i++) {
            if (a.data[i].image.length){
                let img = a.data[i].image;
                let link = (a.data[i].link) ? 'onclick=location.href="'+a.data[i].link+'" target="_blank"' : '';
                response += '<div class="parent" '+ link +'>\
                                <img class="owl-img" src="upload/Image/' + img[0].uuid_name + '" >\
                            </div>';
            }
        }
        $('.owl-carousel').append(response);

        $('.owl-carousel').owlCarousel({
            loop:true,
            margin:10,
            nav:false,
            items: 1,
            dots: false,
            autoHeight:true,
            autoplay:true,
            autoplayTimeout:3000,
            autoplayHoverPause:true
        })
    });

    ajax('GET', '/api/news/index', {}, function (a) {
        let response = '';
        $('#news').empty();
        for (let i = 0; i < a.data.length; i++) {
            if (a.data[i].image.length){
                let img = a.data[i].image;
                let _this = a.data[i];
                response = '<div class="index-news col-12">'+
                            '<div class="img-box col-12 col-sm-5">'+
                                '<img class="col-12" src="/upload/Image/' + _this.image +'" alt="your_keyword"/>'+
                            '</div>'+
                            '<div class="text-box col-12 col-sm-7" style="padding: 10px 0">'+
                                '<h3>' + _this.title +'</h3>'+
                                '<p style="white-space: break-all;">' + _this.content.substring(1, 150) + '</p>'+
                                '<button class="btn-pete nopadding pnews" data-id="' + _this.id + '">Read more</button>'+
                            '</div>'+
                        '</div>';
                $('#news').append(response);
            }
        }
    });

    ajax('GET', '/api/ads/list', {}, function (a) {
        let response = '';
        $('#ads').empty();
        for (let i = 0; i < a.data.length; i++) {
            if (a.data[i].image.length){
                let img = a.data[i].image[0]; 
                response = '<img src="/upload/Image/'+ img.uuid_name +'" style="object-fit: contain; height: 600px;"/>';
                $('#ads').append(response);
                break ;
            }
        }
    });

    ajax('GET', '/api/media/list', {}, function (a) {
        if(a.success)
        {
            $('#mediaBox').empty();
            for (let i = 0; i < a.data.length; i++) {
                if (i == 4) break ;
                if (a.data[i].image){
                    let _this = a.data[i];
                    let response = '<div class="col-10 col-sm-6 col-lg-3">\
                                        <div class="box">\
                                            <img class="content" style="border-radius: 50%;" src="/upload/Image/'+ _this.image +'"" alt="'+ _this.link_alt +'"/>\
                                        </div>\
                                        <div class="col-12 d-flex justify-content-center" style="margin-top: 15px;">\
                                            <button class="btn btn-info" onclick=location.href="'+ _this.link +'" target="_blank">'+ trans_media(_this.type) +'</button>\
                                        </div>\
                                    </div>';
                    $('#mediaBox').append(response);
                }
            }
        }
    });

    $(document).on('click', '.pnews', function () {
        let tid = $(this).data('id');
        console.log(tid);
        window.location.href = '/new?tid=' + tid;
    });
 });