$(document).ready(function () {

    $.ajax({
        url: '/api/ease/nearby',
        method: 'GET',
        dataType: 'json',

        success:function(res){
            var list = res.data, wow = 100;
            for(var i in list){
                var nearby = list[i], website = (nearby['website'] != '') ? '<a href="'+ nearby['website'] + '" class="btn view-detail-btn" target="_blank">Visit Website <i class="fas fa-long-arrow-alt-right"></i></a>' : '';
                var div = '' +
                    '<div class="single-nearby-area d-flex flex-wrap align-items-center wow fadeInUp " data-wow-delay="'+wow+'ms">' +
                    '   <div class="nearby-thumbnail col-12 col-sm-4"><a href="#"><img src="img/attraction1.jpg"></a></div>\n' +
                    '      <div class="nearby-content d-flex flex-column justify-content-around col-12 col-sm-8">\n' +
                    '         <div class="nearby-meta">\n' +
                    '            <p>' + nearby['category'] + '&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;'+ nearby['su-bcategory'] + '</p>\n' +
                    '         </div>\n' +
                    '         <div class="d-flex flex-wrap align-content-center">\n' +
                    '            <div><p class="nearby-title">'+ nearby['name'] + '</p></div>\n' +
                    '            <div><p class="nearby-recomd">必吃：'+ nearby['recommend'] + '</p></div>\n' +
                    '         </div>\n' +
                    '         <div>\n' +
                    '            <p>營業時間：'+ nearby['time'] + ' &nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;  電話：'+ nearby['tel'] + '</p>\n' +
                    '            <p>地址：'+ nearby['address'] + '</p>' + website;
                '         </div>' +
                '   </div>' +
                '</div>';

                div = '<div class="All ' + nearby['category'] + ' ' + nearby['su-bcategory'] + '">' + div + '</div>';

                $('#nearyList').append(div);
                wow += 200;
            }
        },
        error:function(err){console.log(err)},
    });

    $.ajax({
        url: '/api/ease/nearby/category',
        method: 'GET',
        dataType: 'json',

        success:function(res){
            var list = res.data;
            for(var i in list){
                var nearby = list[i];
                var div = '' +
                    '<div class="checkbox">\n' +
                    '   <label style="font-size: 1.5em">\n' +
                    '       <input type="checkbox" value="' + nearby['name'] + '" class="category" checked>\n' +
                    '       <span class="cr"><i class="cr-icon fa fa-check"></i></span>' + nearby['name'] +
                    '   </label>\n' +
                    '</div>';

                $('#search').append(div);
            }
        },
        error:function(err){console.log(err)},
    });

    $(document).on('click', '.category', function (){
        var chb = $(this), val = chb.val(), display = (chb.is(":checked")) ? 'block' : 'none';

        $('.'+val).each(function () {
            $(this).css('display', display);
        });
    })

});
